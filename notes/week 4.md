
https://github.com/vipinkmenon/neuralNetwork/tree/master

number representation - fixed point representation less accurate than floating but easy to implement in hardware.

* for addition and substraction, 2's complement representation is very efficient. for multiplication sign magnitude might be more efficient.
activation fucntions - circuits generating these funcins are very challenging. we pre calculate their values since we will be aware of range of x and store them in a rom. these roms will also called look up tables. these roms are build either using block rams or distributed rams(ffs and luts)
the address bus to the rom will be x.
using IP cores - wont use ip core for building neural networks to bring more flexibilty

## designing a neuron
![[Pasted image 20250616152720.png]]

each input will have a weight value
d is delay
activation function is also pre calculated located in a rom

num1xnum2 signed multiplication - the result will have sum of total number of bits in num1 and 2. eg if num1 m int n frac , num2 k int j frac. the result will have m+n+k+j number of bits.
2 bit sign(first 2 bits zero for positive and 1 for negative)
m-1+k-1 -> integer part
n+j -> fractional part

for the "sum" variable in neuron code
1 bit sign
sizeof(int part of input) + sizeof(int part of weight + 1) -> integer part
sizeof(frac part of input) + sizeof(frac part of weight)  -> fractional part
therefore the size is 2 times dataWidth - 1

the sum is used for getting the result from the activation function.

depth of LUT for sigmoid will be 2^32  if we sent the 32 bit sum which is 2^32x16 bits 4gigabytes for one neuron. the datawidth should be the result from sigmoid. so we take the most significant bits from sum to sigmoid. 


## friday

under stood code for relu. how we multiply two fixed point numers - multiply the integer part and later add the point. the sigmoid memory is generated by a python script(genSigmoid.py)
. 
added all the files to vivado.
for timing performance comparison. adding a constraints "file create_clock -period  4.000 -name clock -waveform (0.000 2.000) [get_ports clk]" - 250 megahertz as the target clock frequency. 
checking resource utilisation. percentage of LUT where 0.18 - from this we can calculate how many total number of such neurons we can implement on this board. 

as dsp runs out, vivado will make use of ffs and luts to do the multipliers.

therefore for relu : 
LUT	72	41000	0.17560975
FF	65	82000	0.07926829
BRAM	0.5	135	0.37037036
DSP	2	240	0.8333334
IO	36	300	12.0
BUFG	1	32	3.125

im getting non clocked sequential cells error.  clock wasnt reaching because i gave the constraint wrong create_clock -period 4.000 -name clk -waveform {0.000 2.000} [get_ports clk] - this is the correct one

now im getting worst negative slack wns as 0.219ns. thats the worst delay with the clock i gave. since slack is positive there is no delay. slack basically means what you requested and what is achievable. we gave 4ns. here so the max he can achieve is 4-slack ns. which is 1/4-0.219 = 0.266 which is 266 megahertz. while we requested 250. 
so FMAX = 266.

lets try sigmoid. with size 5

LUT	67	41000	0.16341463
FF	55	82000	0.067073174
BRAM	0.5	135	0.37037036
DSP	2	240	0.8333334
IO	36	300	12.0
BUFG	1	32	3.125

here number of luts and ff is reduced since we use look up tables here instead of computing as in relu. 
here slack is 0.349ns. 1/4-0.349 = 0.273 - running on higher frequency
fmax = 273

### Designing the layers

784 inputs - 30 - 30 - 10 - 10 outputs

first for layer one instantiate 30 neurons one by one or use generate statement.